define("app",function(){!function(){"use strict"}(window)});define("controller.todo",function(e,t,n){"use strict";var o=t("util.route"),i=t("model.todo");o.look(e).when("#/active",function(){var t=i.get();e.todos=t.filter(function(e){if(!e.completed){return e}})}).when("#/completed",function(){var t=i.get();e.todos=t.filter(function(e){if(e.completed){return e}})}).others(function(){e.todos=i.get()});o.nav();e.add=function(e){e=e.trim();if(!e){return}i.add(e);o.nav()};e.remove=function(e){i.remove(e);o.nav()};e.update=function(t){t.title=t.title.trim();if(!t.title){e.remove(t)}else{i.update(t);o.nav()}};e.get=function(){return i.get()};e.getCompleteCount=function(){return i.getCount(true)};e.getTodoCount=function(){return i.getCount(false)};e.toggleAll=function(){i.toggleAll();o.nav()};e.clearCompleted=function(){i.clearCompleted();o.nav()}});define("model.todo",function(e,t,n){"use strict";var o=t("river.core.tools");var i="todos-riverjs";e.get=function(){return JSON.parse(localStorage.getItem(i)||"[]")};function r(e){localStorage.setItem(i,JSON.stringify(e))}e.add=function(t){var n={id:o.guid(),title:t,completed:false};var i=e.get();i.push(n);r(i)};e.remove=function(t){var n=e.get();n=n.filter(function(e){if(e.id!==t.id){return e}});r(n)};e.update=function(t){var n=e.get();for(var o=0,i=n.length;o<i;o++){if(t.id===n[o].id){n[o].title=t.title;n[o].completed=t.completed;break}}r(n)};e.getCount=function(t){var n=e.get();var o=0;for(var i=0,r=n.length;i<r;i++){if(n[i].completed===t){o++}}return o};e.toggleAll=function(){var t=e.get();var n=e.getCount(true);for(var o=0,i=t.length;o<i;o++){if(t.length===n){t[o].completed=false}else{t[o].completed=true}}r(t)};e.clearCompleted=function(){var t=e.get().filter(function(e){if(!e.completed){return e}});r(t)}});define("util.route",function(e,t,n){"use strict";var o,i={};function r(){var e=location.hash;if(i[e]&&typeof i[e]==="function"){i[e]()}else if(i.__defaults&&typeof i.__defaults==="function"){i.__defaults()}}window.addEventListener("hashchange",function(){r();if(o){o.apply()}});e.nav=function(){r()};e.when=function(e,t){i[e]=t;return this};e.others=function(e){i.__defaults=e;return this};e.look=function(e){o=e;return this}});define("river.grammer.footer",function(e,t,n){"use strict";var o=t("util.route");function i(e,t){for(var n=0,o=e.length;n<o;n++){if(n===t){e[n].className="selected"}else{e[n].className=""}}}function r(e,t){if(t===0){e.innerHTML="<strong>0</strong> items left"}else if(t===1){e.innerHTML="<strong>1</strong> item left"}else{e.innerHTML="<strong>"+t+"</strong> items left"}}function l(e,t){e.innerHTML="Clear completed ("+t+")";if(t===0){e.style.display="none"}else{e.style.display="block"}}function u(e,t){if(!t.get().length){e.style.display="none"}else{e.style.display="block"}}function f(e,t,n){var f=n.querySelector("#todo-count");var c=n.querySelector("#clear-completed");var a=n.querySelectorAll("#filters li a");r(f,t.getTodoCount());l(c,t.getCompleteCount());u(n,t);o.when("#/active",function(){i(a,1)}).when("#/completed",function(){i(a,2)}).others(function(){i(a,0)});o.nav();t.onchange(function(){r(f,t.getTodoCount());l(c,t.getCompleteCount());u(n,t)})}e=n.exports=f});define("river.grammer.header",function(e,t,n){"use strict";function o(e,t,n){var o=n.querySelector("#new-todo");o.onkeydown=function(e){if(e.keyCode===13){t.add(o.value);t.apply();o.value=""}}}e=n.exports=o});define("river.grammer.item",function(e,t,n){"use strict";function o(e,t,n){var o=n.querySelector(".toggle"),i=n.querySelector(".edit"),r=false,l=false;o.onclick=function(){t.todo.completed=!t.todo.completed;t.update(t.todo);t.apply()};n.ondblclick=function(){n.className=n.className+" editing";i.value=t.todo.title;i.focus()};i.onblur=function(){n.className=n.className.replace(/\sediting/,"");if(l){return}t.todo.title=this.value;t.update(t.todo);t.apply()};i.onkeydown=function(e){r=e.keyCode===13;l=e.keyCode===27;if(r||l){n.className=n.className.replace(/\sediting/,"")}};var u=t.todo.completed;n.className=u?"completed":"";o.checked=u?true:false}e=n.exports=o});define("river.grammer.main",function(exports,require,module){"use strict";function toggleAllButton(tall,scope){var todos=scope.get();var completedCount=scope.getCompleteCount();tall.checked=todos.length===completedCount?true:false}function hideMain(element,todos){if(!todos.length){element.style.display="none"}else{element.style.display="block"}}function main(str,scope,element){var tall=element.querySelector("#toggle-all");toggleAllButton(tall,scope);hideMain(element,scope.todos);tall.onclick=function(){scope.toggleAll();scope.apply()};scope.onchange("todos",function(todos){hideMain(element,todos);toggleAllButton(tall,scope)})}exports=module.exports=main});//# sourceMappingURL=app.map